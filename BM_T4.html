<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <title>RPH BM T4 - ANDREW ARID</title>
    <style>
        :root { --p: #003366; --ai-obj: #2980b9; --ai-act: #8e44ad; --ai-ref: #16a085; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); padding: 20px; }
        .setup-box { max-width: 1200px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid var(--p); }
        
        .header-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; background: #f8f9fa; padding: 15px; border-radius: 10px; border: 1px solid #eee; }
        label { font-weight: bold; color: var(--p); font-size: 11px; text-transform: uppercase; letter-spacing: 1px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; box-sizing: border-box; transition: 0.3s; }
        input:focus, select:focus, textarea:focus { border-color: var(--p); outline: none; box-shadow: 0 0 8px rgba(0,51,102,0.2); }

        .sp-box { border: 1px solid #ddd; border-radius: 8px; max-height: 180px; overflow-y: auto; background: #fff; margin-top: 5px; }
        .sp-item { padding: 12px; cursor: pointer; border-bottom: 1px solid #eee; font-size: 13px; transition: 0.2s; }
        .sp-item:hover { background: #f1f7ff; }
        .selected { background: #e3f2fd !important; font-weight: bold; border-left: 6px solid var(--p); color: var(--p); }

        /* AI Suggestion Buttons */
        .ai-group { background: #fff; padding: 18px; border: 1px solid #e8e8e8; border-radius: 12px; margin-top: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .btn-ai { border: none; color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 12px; margin-bottom: 12px; display: inline-block; box-shadow: 0 3px 0 rgba(0,0,0,0.1); }
        .btn-obj { background: var(--ai-obj); }
        .btn-act { background: var(--ai-act); }
        .btn-ref { background: var(--ai-ref); }
        .btn-ai:active { transform: translateY(2px); box-shadow: none; }

        /* Bottom Action Buttons */
        .hub-actions { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-top: 35px; border-top: 2px solid #eee; padding-top: 25px; }
        .btn-hub { border: none; padding: 18px; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; text-align: center; font-size: 13px; text-transform: uppercase; transition: 0.3s; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        .bg-jana { background: var(--p); }
        .bg-save { background: #27ae60; }
        .bg-print { background: #34495e; }
        .bg-clear { background: #e67e22; }
        .bg-home { background: #7f8c8d; }
        .btn-hub:hover { opacity: 0.9; transform: translateY(-2px); }

        /* PROFESSIONAL PRINT VIEW */
        .rph-paper { width: 210mm; min-height: 297mm; padding: 15mm; margin: 40px auto; background: white; border: 1px solid #ccc; box-sizing: border-box; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .print-header { text-align: center; border-bottom: 4px double #000; padding-bottom: 10px; margin-bottom: 20px; }
        .m-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .m-table td { border: 1px solid #000; padding: 12px; font-size: 14px; vertical-align: top; line-height: 1.5; }
        .l-cell { background: #f9f9f9 !important; font-weight: bold; width: 28%; text-transform: uppercase; font-size: 12px; }
        .val-cell { color: #000; }
        .act-step { display: block; margin-bottom: 8px; border-bottom: 1px dashed #eee; padding-bottom: 4px; }

        @media print { 
            .no-print { display: none; } 
            body { background: white; padding: 0; }
            .rph-paper { margin: 0; border: none; box-shadow: none; width: 100%; } 
            .act-step { border-bottom: none; }
        }
    </style>
</head>
<body>

<div class="setup-box no-print">
    <h2 style="text-align:center; color:var(--p); margin-top:0;">BM TAHUN 4: SISTEM RPH SMART-CONTEXT (PRO)</h2>
    
    <div class="header-grid">
        <div><label>Tarikh / Tark</label><input type="date" id="tark" onchange="updDay()"></div>
        <div><label>Hari / Tadau</label><input type="text" id="hari" readonly></div>
        <div><label>Minggu / Minggu</label><select id="mng"></select></div>
        <div><label>Masa / Timpu</label><input type="text" id="masa" placeholder="Cth: 08:00 - 09:00"></div>
    </div>

    <label>Pilih Standard Kandungan (SK)</label>
    <select id="sk_select" onchange="loadSP()">
        <option value="">-- SILA PILIH SK DSKP T4 --</option>
        <optgroup label="Lisan">
            <option value="1.1">1.1 Mendengar dan memberikan respons</option>
            <option value="1.2">1.2 Bertutur menyampaikan maklumat</option>
        </optgroup>
        <optgroup label="Membaca">
            <option value="2.1">2.1 Asas membaca dan memahami</option>
            <option value="2.2">2.2 Membaca, memahami, menaakul</option>
        </optgroup>
        <optgroup label="Menulis">
            <option value="3.1">3.1 Asas menulis</option>
            <option value="3.2">3.2 Menulis perkataan, frasa, dan ayat</option>
            <option value="3.3">3.3 Menghasilkan penulisan</option>
        </optgroup>
        <optgroup label="Tatabahasa">
            <option value="5.1">5.1 Memahami dan menggunakan golongan kata</option>
        </optgroup>
    </select>

    <div class="sp-box" id="sp-list"></div>

    <div class="ai-group">
        <button class="btn-ai btn-obj" onclick="getSmartAI('obj')">‚ú® CADANGAN OBJEKTIF (CONTEXT AI)</button>
        <textarea id="f_obj" placeholder="Klik butang di atas untuk jana objektif..." rows="2"></textarea>
    </div>

    <div class="ai-group">
        <button class="btn-ai btn-act" onclick="getSmartAI('act')">üöÄ CADANGAN AKTIVITI (SENARAI KE BAWAH)</button>
        <textarea id="f_act" placeholder="Idea aktiviti akan disenaraikan mengikut langkah..." rows="6"></textarea>
    </div>

    <div class="ai-group">
        <button class="btn-ai btn-ref" onclick="getSmartAI('ref')">üìù CADANGAN REFLEKSI</button>
        <textarea id="f_ref" placeholder="Refleksi pengajaran..." rows="2"></textarea>
    </div>

    <div class="hub-actions">
        <button class="btn-hub bg-jana" onclick="genRPH()">JANA RPH</button>
        <button class="btn-hub bg-save" onclick="alert('RPH Berjaya Disimpan!')">SIMPAN</button>
        <button class="btn-hub bg-print" onclick="window.print()">CETAK / PDF</button>
        <button class="btn-hub bg-clear" onclick="location.reload()">CLEAR ALL</button>
        <button class="btn-hub bg-home" onclick="goToHub()">KEMBALI KE HUB</button>
    </div>
</div>

<div id="print-zone"></div>

<script>
// DATA DSKP & AI POOL
const spData = {
    "1.1": ["1.1.1 Mendengar, mengecam sebutan, dan menyebut semula istilah.","1.1.2 Mendengar dan memberi respons terhadap perintah.","1.1.3 Mendengar dan memberikan respons terhadap soalan."],
    "2.1": ["2.1.1 Membaca dan memahami petikan dengan sebutan betul.","2.2.1 Membaca dan menaakul bahan multimedia."],
    "3.2": ["3.2.1 Membina dan menulis ayat tunggal serta ayat majmuk.","3.2.2 Menghasilkan jawapan pemahaman berdasarkan teks."],
    "5.1": ["5.1.1 Memahami dan menggunakan kata nama mengikut konteks.","5.1.2 Memahami dan menggunakan kata kerja."]
};

const smartAI = {
    "1.1": { 
        obj: ["Murid dapat menyebut 5 istilah dengan sebutan betul.","Murid dapat memberi respons terhadap 3 ayat perintah."],
        act: ["1. Mendengar rakaman audio dialog.\n2. Permainan Telefon Karat.\n3. Sesi soal jawab lisan.","1. Simulasi ayat perintah.\n2. Murid melakukan tugasan mengikut arahan lisan.\n3. Rumusan aktiviti."]
    },
    "2.1": {
        obj: ["Murid dapat membaca petikan dengan kelancaran yang baik.","Murid dapat menjelaskan maksud 3 kosa kata baharu."],
        act: ["1. Bacaan mekanis secara kelas.\n2. Mencari kosa kata dalam kamus.\n3. Menjawab kuiz kefahaman.\n4. Pembentangan kumpulan."]
    },
    "3.2": {
        obj: ["Murid dapat membina 5 ayat majmuk menggunakan kata hubung.","Murid dapat menulis jawapan pemahaman yang lengkap."],
        act: ["1. Meneliti gambar rangsangan.\n2. Aktiviti Sentence Scramble.\n3. Menulis jawapan dalam buku latihan.\n4. Semakan rakan sebaya."]
    },
    "ref": ["30/32 murid mencapai objektif.","PdPc berjalan lancar dan murid aktif.","Objektif tercapai, murid seronok dengan aktiviti AI."]
};

// LOGIK SISTEM
for(let i=1;i<=42;i++) document.getElementById('mng').innerHTML += `<option value="${i}">Minggu ${i}</option>`;
function updDay() { const d = new Date(document.getElementById('tark').value); document.getElementById('hari').value = ["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"][d.getDay()]; }
function goToHub() { window.location.href = 'index.html'; } // Pastikan nama fail hub cikgu betul

let selSP = [];
function loadSP() {
    const sk = document.getElementById('sk_select').value;
    const box = document.getElementById('sp-list'); box.innerHTML = ""; selSP = [];
    if(spData[sk]) spData[sk].forEach(s => {
        let d = document.createElement('div'); d.className = 'sp-item'; d.innerText = s;
        d.onclick = function() { this.classList.toggle('selected'); if(this.classList.contains('selected')) selSP.push(s); else selSP = selSP.filter(x=>x!==s); };
        box.appendChild(d);
    });
}

function getSmartAI(type) {
    const sk = document.getElementById('sk_select').value;
    if(!sk && type !== 'ref') return alert("Sila pilih SK dahulu!");
    let pool = (type === 'ref') ? smartAI.ref : (smartAI[sk] && smartAI[sk][type]) ? smartAI[sk][type] : ["Pilih SK yang lain."];
    document.getElementById('f_'+type).value = pool[Math.floor(Math.random()*pool.length)];
}

function genRPH() {
    if(selSP.length === 0) return alert("Pilih SP dahulu!");
    
    // Format Aktiviti kepada List Menegak
    const rawAct = document.getElementById('f_act').value;
    const formattedAct = rawAct.split('\n').map(step => `<span class="act-step">${step}</span>`).join('');

    const content = `
    <div class="rph-paper">
        <div class="print-header">
            <h1 style="margin:0; font-size:22px; color:#000;">RANCANGAN PENGAJARAN HARIAN</h1>
            <h3 style="margin:5px 0; color:#444;">BAHASA MELAYU TAHUN 4</h3>
        </div>
        <table class="m-table">
            <tr><td class="l-cell">TARIKH / MINGGU</td><td class="val-cell">${document.getElementById('tark').value} | MINGGU ${document.getElementById('mng').value}</td><td class="l-cell">HARI</td><td class="val-cell">${document.getElementById('hari').value}</td></tr>
            <tr><td class="l-cell">MASA</td><td class="val-cell">${document.getElementById('masa').value}</td><td class="l-cell">GURU</td><td class="val-cell">ANDREW ARID</td></tr>
        </table>
        <table class="m-table">
            <tr><td class="l-cell">STANDARD KANDUNGAN</td><td class="val-cell">${document.getElementById('sk_select').options[document.getElementById('sk_select').selectedIndex].text}</td></tr>
            <tr><td class="l-cell">STANDARD PEMBELAJARAN</td><td class="val-cell"><b>${selSP.join('<br>')}</b></td></tr>
            <tr><td class="l-cell">OBJEKTIF PEMBELAJARAN</td><td class="val-cell">${document.getElementById('f_obj').value}</td></tr>
            <tr><td class="l-cell">AKTIVITI PENGAJARAN</td><td class="val-cell">${formattedAct}</td></tr>
            <tr><td class="l-cell">REFLEKSI / IMPAK</td><td class="val-cell">${document.getElementById('f_ref').value}</td></tr>
        </table>
        <div style="margin-top:30px; font-size:10px; text-align:right; color:#999; font-style:italic;">Dijana secara digital oleh Sistem RPH Andrew Arid</div>
    </div>`;
    document.getElementById('print-zone').innerHTML = content; // Guna = supaya print zone tak bertindan setiap kali jana
    window.scrollTo(0, document.body.scrollHeight);
}
</script>
</body>
</html>
